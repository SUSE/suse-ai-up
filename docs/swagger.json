{
  "swagger": "2.0",
  "info": {
    "title": "SUSE AI Universal Proxy API",
    "description": "Complete API documentation for the SUSE AI Universal Proxy - A comprehensive MCP proxy system with registry, discovery, and plugin management",
    "version": "1.0.0",
    "contact": {
      "name": "SUSE AI Team",
      "email": "ai@suse.com"
    }
  },
  "host": "localhost:8911",
  "basePath": "/",
  "schemes": ["http", "https"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "tags": [
    {"name": "Proxy", "description": "MCP proxy endpoints (Port 8911)"},
    {"name": "Registry", "description": "MCP server registry management (Port 8913)"},
    {"name": "Discovery", "description": "Network discovery and server scanning (Port 8912)"},
    {"name": "Plugins", "description": "Plugin management and registration (Port 8914)"},
    {"name": "Health", "description": "Health check endpoints"}
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": ["Health"],
        "summary": "Proxy Health Check",
        "description": "Check the health status of the proxy service",
        "responses": {
          "200": {
            "description": "Service is healthy",
            "schema": {
              "type": "object",
              "properties": {
                "status": {"type": "string", "example": "healthy"},
                "service": {"type": "string", "example": "proxy"},
                "timestamp": {"type": "string", "format": "date-time"}
              }
            }
          }
        }
      }
    },
    "/mcp": {
      "post": {
        "tags": ["Proxy"],
        "summary": "MCP JSON-RPC Endpoint",
        "description": "Main Model Context Protocol JSON-RPC endpoint for tool calls and resource access",
        "parameters": [
          {
            "in": "body",
            "name": "request",
            "description": "JSON-RPC 2.0 request",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "jsonrpc": {"type": "string", "example": "2.0"},
                "id": {"type": "integer", "example": 1},
                "method": {"type": "string", "example": "tools/call"},
                "params": {"type": "object"}
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful MCP response",
            "schema": {
              "type": "object",
              "properties": {
                "jsonrpc": {"type": "string"},
                "id": {"type": "integer"},
                "result": {"type": "object"}
              }
            }
          }
        }
      }
    },
    "/mcp/tools": {
      "get": {
        "tags": ["Proxy"],
        "summary": "List Available Tools",
        "description": "Get a list of all available MCP tools",
        "responses": {
          "200": {
            "description": "List of tools",
            "schema": {
              "type": "object",
              "properties": {
                "tools": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {"type": "string"},
                      "description": {"type": "string"},
                      "inputSchema": {"type": "object"}
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/mcp/tools/{toolName}": {
      "post": {
        "tags": ["Proxy"],
        "summary": "Call MCP Tool",
        "description": "Execute a specific MCP tool",
        "parameters": [
          {"name": "toolName", "in": "path", "required": true, "type": "string"},
          {"name": "params", "in": "body", "required": true, "schema": {"type": "object"}}
        ],
        "responses": {
          "200": {"description": "Tool execution result", "schema": {"type": "object"}}
        }
      }
    },
    "/mcp/resources": {
      "get": {
        "tags": ["Proxy"],
        "summary": "List Available Resources",
        "description": "Get a list of all available MCP resources",
        "responses": {
          "200": {
            "description": "List of resources",
            "schema": {
              "type": "object",
              "properties": {
                "resources": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "uri": {"type": "string"},
                      "name": {"type": "string"},
                      "description": {"type": "string"},
                      "mimeType": {"type": "string"}
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/mcp/resources/{resourceUri}": {
      "get": {
        "tags": ["Proxy"],
        "summary": "Read MCP Resource",
        "description": "Read content from a specific MCP resource",
        "parameters": [
          {"name": "resourceUri", "in": "path", "required": true, "type": "string"}
        ],
        "responses": {
          "200": {"description": "Resource content", "schema": {"type": "object"}}
        }
      }
    },
    "/api/v1/registry/browse": {
      "get": {
        "tags": ["Registry"],
        "summary": "Browse MCP Server Registry",
        "description": "Get a filtered list of MCP servers from the registry (Registry Service - Port 8913)",
        "parameters": [
          {"name": "q", "in": "query", "description": "Search query", "type": "string"},
          {"name": "category", "in": "query", "description": "Category filter (development, productivity, etc.)", "type": "string"},
          {"name": "transport", "in": "query", "description": "Transport type filter", "type": "string"},
          {"name": "registryType", "in": "query", "description": "Registry type filter", "type": "string"},
          {"name": "validationStatus", "in": "query", "description": "Validation status filter", "type": "string"}
        ],
        "responses": {
          "200": {"description": "List of MCP servers", "schema": {"type": "array", "items": {"$ref": "#/definitions/MCPServer"}}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/registry/{id}": {
      "get": {
        "tags": ["Registry"],
        "summary": "Get MCP Server by ID",
        "description": "Retrieve a specific MCP server from the registry (Registry Service - Port 8913)",
        "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "200": {"description": "MCP server details", "schema": {"$ref": "#/definitions/MCPServer"}},
          "404": {"description": "Server not found"}
        },
        "security": [{"apiKey": []}]
      },
      "put": {
        "tags": ["Registry"],
        "summary": "Update MCP Server",
        "description": "Update an existing MCP server in the registry (Registry Service - Port 8913)",
        "parameters": [
          {"name": "id", "in": "path", "required": true, "type": "string"},
          {"name": "server", "in": "body", "required": true, "schema": {"$ref": "#/definitions/MCPServer"}}
        ],
        "responses": {
          "200": {"description": "Updated server", "schema": {"$ref": "#/definitions/MCPServer"}},
          "404": {"description": "Server not found"}
        },
        "security": [{"apiKey": []}]
      },
      "delete": {
        "tags": ["Registry"],
        "summary": "Delete MCP Server",
        "description": "Remove an MCP server from the registry (Registry Service - Port 8913)",
        "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "204": {"description": "Server deleted"},
          "404": {"description": "Server not found"}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/registry/upload": {
      "post": {
        "tags": ["Registry"],
        "summary": "Upload Single MCP Server",
        "description": "Add a single MCP server to the registry (Registry Service - Port 8913)",
        "parameters": [{"name": "server", "in": "body", "required": true, "schema": {"$ref": "#/definitions/MCPServer"}}],
        "responses": {
          "201": {"description": "Server created", "schema": {"$ref": "#/definitions/MCPServer"}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/registry/upload/bulk": {
      "post": {
        "tags": ["Registry"],
        "summary": "Bulk Upload MCP Servers",
        "description": "Add multiple MCP servers to the registry (Registry Service - Port 8913)",
        "parameters": [{"name": "servers", "in": "body", "required": true, "schema": {"type": "array", "items": {"$ref": "#/definitions/MCPServer"}}}],
        "responses": {
          "201": {"description": "Servers created", "schema": {"type": "array", "items": {"$ref": "#/definitions/MCPServer"}}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/registry/reload": {
      "post": {
        "tags": ["Registry"],
        "summary": "Reload Remote Servers",
        "description": "Reload MCP servers from remote configuration files (Registry Service - Port 8913)",
        "responses": {
          "200": {"description": "Reload completed", "schema": {"type": "object", "properties": {"status": {"type": "string"}, "message": {"type": "string"}}}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/adapters": {
      "get": {
        "tags": ["Registry"],
        "summary": "List Adapters",
        "description": "Get a list of all adapters for the current user (Registry Service - Port 8913)",
        "responses": {
          "200": {"description": "List of adapters", "schema": {"type": "array", "items": {"$ref": "#/definitions/Adapter"}}}
        },
        "security": [{"apiKey": []}]
      },
      "post": {
        "tags": ["Registry"],
        "summary": "Create Adapter",
        "description": "Create a new adapter from a registry server (Registry Service - Port 8913)",
        "parameters": [{"name": "adapter", "in": "body", "required": true, "schema": {"$ref": "#/definitions/CreateAdapterRequest"}}],
        "responses": {
          "201": {"description": "Adapter created", "schema": {"$ref": "#/definitions/CreateAdapterResponse"}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/adapters/{id}": {
      "get": {
        "tags": ["Registry"],
        "summary": "Get Adapter by ID",
        "description": "Retrieve details of a specific adapter (Registry Service - Port 8913)",
        "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "200": {"description": "Adapter details", "schema": {"$ref": "#/definitions/Adapter"}},
          "404": {"description": "Adapter not found"}
        },
        "security": [{"apiKey": []}]
      },
      "put": {
        "tags": ["Registry"],
        "summary": "Update Adapter",
        "description": "Update an existing adapter (Registry Service - Port 8913)",
        "parameters": [
          {"name": "id", "in": "path", "required": true, "type": "string"},
          {"name": "adapter", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Adapter"}}
        ],
        "responses": {
          "200": {"description": "Adapter updated", "schema": {"$ref": "#/definitions/Adapter"}},
          "404": {"description": "Adapter not found"}
        },
        "security": [{"apiKey": []}]
      },
      "delete": {
        "tags": ["Registry"],
        "summary": "Delete Adapter",
        "description": "Remove an adapter (Registry Service - Port 8913)",
        "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "204": {"description": "Adapter deleted"},
          "404": {"description": "Adapter not found"}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/adapters/{id}/sync": {
      "post": {
        "tags": ["Registry"],
        "summary": "Sync Adapter Capabilities",
        "description": "Synchronize capabilities for a specific adapter (Registry Service - Port 8913)",
        "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "200": {"description": "Capabilities synced", "schema": {"type": "object", "properties": {"status": {"type": "string"}, "message": {"type": "string"}}}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/scan": {
      "post": {
        "tags": ["Discovery"],
        "summary": "Start Network Scan",
        "description": "Initiate a network scan for MCP servers (Discovery Service - Port 8912)",
        "parameters": [{"name": "config", "in": "body", "required": true, "schema": {"$ref": "#/definitions/ScanConfig"}}],
        "responses": {
          "200": {"description": "Scan started", "schema": {"type": "object", "properties": {"scanId": {"type": "string"}, "status": {"type": "string"}, "config": {"$ref": "#/definitions/ScanConfig"}, "startTime": {"type": "string", "format": "date-time"}}}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/scan/{id}": {
      "get": {
        "tags": ["Discovery"],
        "summary": "Get Scan Status",
        "description": "Check the status of a running or completed scan (Discovery Service - Port 8912)",
        "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "200": {"description": "Scan status", "schema": {"$ref": "#/definitions/ScanJob"}},
          "404": {"description": "Scan not found"}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/servers": {
      "get": {
        "tags": ["Discovery"],
        "summary": "List Discovered Servers",
        "description": "Get a list of all discovered MCP servers (Discovery Service - Port 8912)",
        "responses": {
          "200": {"description": "List of discovered servers", "schema": {"type": "object", "properties": {"servers": {"type": "array", "items": {"$ref": "#/definitions/DiscoveredServer"}}, "totalCount": {"type": "integer"}, "scanCount": {"type": "integer"}}}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/plugins": {
      "get": {
        "tags": ["Plugins"],
        "summary": "List Plugins",
        "description": "Get a list of all registered plugins (Plugins Service - Port 8914)",
        "parameters": [{"name": "type", "in": "query", "description": "Filter by service type", "type": "string", "enum": ["smartagents", "registry", "virtualmcp"]}],
        "responses": {
          "200": {"description": "List of plugins", "schema": {"type": "object", "properties": {"plugins": {"type": "array", "items": {"$ref": "#/definitions/Plugin"}}, "totalCount": {"type": "integer"}}}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/plugins/register": {
      "post": {
        "tags": ["Plugins"],
        "summary": "Register Plugin",
        "description": "Register a new plugin (Plugins Service - Port 8914)",
        "parameters": [{"name": "plugin", "in": "body", "required": true, "schema": {"$ref": "#/definitions/ServiceRegistration"}}],
        "responses": {
          "201": {"description": "Plugin registered", "schema": {"$ref": "#/definitions/ServiceRegistration"}}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/plugins/{id}": {
      "get": {
        "tags": ["Plugins"],
        "summary": "Get Plugin by ID",
        "description": "Retrieve details of a specific plugin (Plugins Service - Port 8914)",
        "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "200": {"description": "Plugin details", "schema": {"$ref": "#/definitions/ServiceRegistration"}},
          "404": {"description": "Plugin not found"}
        },
        "security": [{"apiKey": []}]
      },
      "delete": {
        "tags": ["Plugins"],
        "summary": "Unregister Plugin",
        "description": "Remove a plugin from the registry (Plugins Service - Port 8914)",
        "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "204": {"description": "Plugin unregistered"},
          "404": {"description": "Plugin not found"}
        },
        "security": [{"apiKey": []}]
      }
    },
    "/api/v1/health/{pluginId}": {
      "get": {
        "tags": ["Plugins"],
        "summary": "Get Plugin Health",
        "description": "Check the health status of a specific plugin (Plugins Service - Port 8914)",
        "parameters": [{"name": "pluginId", "in": "path", "required": true, "type": "string"}],
        "responses": {
          "200": {"description": "Plugin health status", "schema": {"$ref": "#/definitions/HealthStatus"}},
          "404": {"description": "Plugin not found"}
        },
        "security": [{"apiKey": []}]
      }
    }
  },
  "definitions": {
    "MCPServer": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "name": {"type": "string"},
        "description": {"type": "string"},
        "packages": {"type": "array", "items": {"$ref": "#/definitions/Package"}},
        "validationStatus": {"type": "string"},
        "discoveredAt": {"type": "string", "format": "date-time"},
        "meta": {"type": "object"}
      }
    },
    "Package": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "version": {"type": "string"},
        "transport": {"$ref": "#/definitions/Transport"},
        "registryType": {"type": "string"}
      }
    },
    "Transport": {
      "type": "object",
      "properties": {
        "type": {"type": "string"},
        "config": {"type": "object"}
      }
    },
    "ScanConfig": {
      "type": "object",
      "properties": {
        "scanRanges": {"type": "array", "items": {"type": "string"}, "example": ["192.168.1.0/24"]},
        "ports": {"type": "array", "items": {"type": "string"}, "example": ["3000", "4000"]},
        "timeout": {"type": "string", "example": "30s"},
        "maxConcurrent": {"type": "integer", "example": 10},
        "excludeProxy": {"type": "boolean", "example": true}
      }
    },
    "ScanJob": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "config": {"$ref": "#/definitions/ScanConfig"},
        "startTime": {"type": "string", "format": "date-time"},
        "status": {"type": "string"},
        "results": {"type": "array", "items": {"$ref": "#/definitions/DiscoveredServer"}},
        "error": {"type": "string"}
      }
    },
    "DiscoveredServer": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "address": {"type": "string"},
        "port": {"type": "integer"},
        "protocol": {"type": "string"},
        "discoveredAt": {"type": "string", "format": "date-time"},
        "lastSeen": {"type": "string", "format": "date-time"}
      }
    },
    "Plugin": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "name": {"type": "string"},
        "description": {"type": "string"},
        "version": {"type": "string"},
        "status": {"type": "string"},
        "config": {"type": "object"}
      }
    },
    "ServiceRegistration": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "name": {"type": "string"},
        "description": {"type": "string"},
        "serviceType": {"type": "string", "enum": ["smartagents", "registry", "virtualmcp"]},
        "endpoint": {"type": "string"},
        "capabilities": {"type": "array", "items": {"type": "string"}},
        "metadata": {"type": "object"}
      }
    },
    "HealthStatus": {
      "type": "object",
      "properties": {
        "status": {"type": "string"},
        "lastChecked": {"type": "string", "format": "date-time"},
        "responseTime": {"type": "integer"},
        "error": {"type": "string"}
      }
    },
    "Adapter": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "mcpServerId": {"type": "string"},
        "name": {"type": "string"},
        "description": {"type": "string"},
        "status": {"type": "string"},
        "mcpFunctionality": {"$ref": "#/definitions/MCPFunctionality"},
        "createdAt": {"type": "string", "format": "date-time"},
        "updatedAt": {"type": "string", "format": "date-time"}
      }
    },
    "CreateAdapterRequest": {
      "type": "object",
      "properties": {
        "mcpServerId": {"type": "string"},
        "name": {"type": "string"},
        "description": {"type": "string"},
        "environmentVariables": {"type": "object", "additionalProperties": {"type": "string"}},
        "authentication": {"$ref": "#/definitions/AdapterAuthConfig"}
      },
      "required": ["mcpServerId", "name"]
    },
    "CreateAdapterResponse": {
      "type": "object",
      "properties": {
        "id": {"type": "string"},
        "mcpServerId": {"type": "string"},
        "mcpClientConfig": {"type": "object"},
        "capabilities": {"$ref": "#/definitions/MCPFunctionality"},
        "status": {"type": "string"},
        "createdAt": {"type": "string", "format": "date-time"}
      }
    },
    "MCPFunctionality": {
      "type": "object",
      "properties": {
        "tools": {"type": "array", "items": {"$ref": "#/definitions/Tool"}},
        "resources": {"type": "array", "items": {"$ref": "#/definitions/Resource"}},
        "prompts": {"type": "array", "items": {"$ref": "#/definitions/Prompt"}}
      }
    },
    "Tool": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "description": {"type": "string"},
        "inputSchema": {"type": "object"}
      }
    },
    "Resource": {
      "type": "object",
      "properties": {
        "uri": {"type": "string"},
        "name": {"type": "string"},
        "description": {"type": "string"},
        "mimeType": {"type": "string"}
      }
    },
    "Prompt": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "description": {"type": "string"},
        "arguments": {"type": "array", "items": {"$ref": "#/definitions/PromptArgument"}}
      }
    },
    "PromptArgument": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "description": {"type": "string"},
        "required": {"type": "boolean"}
      }
    },
    "AdapterAuthConfig": {
      "type": "object",
      "properties": {
        "type": {"type": "string", "enum": ["none", "basic", "bearer", "api_key"]},
        "config": {"type": "object"}
      }
    }
  },
  "securityDefinitions": {
    "apiKey": {
      "type": "apiKey",
      "name": "X-API-Key",
      "in": "header",
      "description": "API key authentication"
    }
  },
  "security": [
    {
      "apiKey": []
    }
  ]
}